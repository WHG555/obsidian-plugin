# obsidian-temple

![GitHub tag (latest by date)](https://img.shields.io/github/v/tag/garyng/obsidian-temple?label=release&style=for-the-badge)

A plugin for templating in Obsidian, powered by [Nunjucks](https://mozilla.github.io/nunjucks/).

## Configuration

Set the directory that contains the templates to be used inside Settings:

![](docs/settings.png)

## Usages

You can insert a new template by clicking on the button in the sidebar

![](docs/sidebar.png)

or via the Command Palette

![](docs/command-palette.png)

You will be prompted to choose a template if there are multiple defined

![](docs/templates-prompt.png)

## Templating

Since `obsidian-temple` uses `nunjucks` under-the-hood, you can use everything supported by `nunjucks`. Check the [official Nunjucks documentation](https://mozilla.github.io/nunjucks/templating.html) on how to write `nunjucks` template.

### Example: Populating `aliases` based on filename with Zettelkasten ID

```njk
---
uid: "{{ zettel.uid }}"
aliases: ["{{ zettel.title }}"]
tags: []
---
```

If the filename is `20201224030406 title.md`, then the output of the template will be:

```
---
uid: "20201224030406"
aliases: ["title"]
tags: []
---
```

It also works if you have the `uid` as a suffix in the filename, eg: `title 20201224030406.md`.

`zettel` is just one of the objects that are provided by `obsidian-temple`, see [Providers](#providers) for more.

## Providers

`obsidian-temple` currently includes a few providers that can provide the [`context` objects](https://mozilla.github.io/nunjucks/api.html#renderstring) for `nunjucks`:
- `file`
- `zettel`
- `datetime`
- `clipboard`

Check their respective documentation at [PROVIDERS DOCUMENTATION](#providers-documentation). You can easily add more providers, see [Adding new provider](#adding-new-provider).

## Adding new provider

You need to:

1. create a new context class, `T`
1. implements `ITempleProvider<T>`
1. register the provider on load

For example, for the `datetime` provider:

1. the context class is [`DateTimeContext`](https://github.com/garyng/obsidian-temple/blob/57bc5738dbf35df5403947be769f9f8b2694ddaa/src/providers/DateTimeContext.ts)
1. the provider class is [`DateTimeTempleProvider`](https://github.com/garyng/obsidian-temple/blob/57bc5738dbf35df5403947be769f9f8b2694ddaa/src/providers/DateTimeTempleProvider.ts)
1. the registration is at [`main.ts`](https://github.com/garyng/obsidian-temple/blob/57bc5738dbf35df5403947be769f9f8b2694ddaa/src/main.ts#L27)

## Alternatives

- [`SilentVoid13/Templater`](https://github.com/SilentVoid13/Templater)

---

# PROVIDERS DOCUMENTATION

This documentation is best viewed inside Obsidian, which can be generated by activating Command Palette > then select `Obsidian Temple: Insert documentation of all providers`.

---

# `file`

Exposes Obsidian's internal [`TFile`](https://github.com/obsidianmd/obsidian-api/blob/d10f2f6efc0d0d7c9bf96cd435ef376b18fbd6d8/obsidian.d.ts#L2206) structure for templating.

## Usages

```
path: {{ file.path }}
name: {{ file.name }}
basename: {{ file.basename }}
extension: {{ file.extension }}
```

outputs:

```
path: Untitled 20210103181939.md
name: Untitled 20210103181939.md
basename: Untitled 20210103181939
extension: md
```

---

# `datetime`

Returns the current date and time as Luxon [`DateTime`](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/e5e63b56d6bb52a95cc5e7cfadc5d1bec3023f14/types/luxon/index.d.ts#L151).

## Usage

```
now: {{ datetime.now }}

day: {{ datetime.now.day }}
month: {{ datetime.now.month }}
year: {{ datetime.now.year }}

hour: {{ datetime.now.hour }}
minute: {{ datetime.now.minute }}
second: {{ datetime.now.second }}
```

outputs:

```
now: 2021-01-03T22:21:36.585+08:00

day: 3
month: 1
year: 2021

hour: 22
minute: 21
second: 36
```


## Formatting with `dateFormat` filter

`dateFormat` uses [Luxon](https://moment.github.io/luxon/index.html) under-the-hood for date formatting. For example:

```
now: {{ datetime.now | dateFormat("ffff") }}
```

outputs:

```
now: Sunday, January 3, 2021, 10:21 PM Singapore Standard Time
```

See [Luxon's documentation](https://moment.github.io/luxon/docs/manual/formatting.html#table-of-tokens) for a complete list of formatting tokens that can be used.

# Settings

You can override the default locale and timezone under Settings.

---

# `zettel`

Extracts uid and title from notes that have the Zettelkasten ID.

## Usages

Given a file named `20201224030406 title.md`, the following template

```
uid: {{ zettel.uid }}
title: {{ zettel.title }}
```

outputs:

```
uid: 20201224030406
title: title.md
```

Works even if the `uid` is used as a suffix, eg. `title 20201224030406.md`.

## Settings

You can override the extraction regex under Settings.

---

# `clipboard`
Extracts data from your system clipboard. Uses [sindresorhus/clipboardy](https://github.com/sindresorhus/clipboardy).

## Usages

```
text: {{ clipboard.text }}
```

outputs:

```
text: content
```

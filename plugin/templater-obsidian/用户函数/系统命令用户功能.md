# 系统命令用户功能

此类用户函数允许您执行系统命令并检索其输出。

需要在 [[Templater]] 的设置中启用系统命令用户功能。

## 定义系统命令用户函数

要定义新的系统命令用户函数，您需要定义一个与 **系统命令** 相关联的 **函数名称**。

为此，请转到插件的设置并单击“添加用户功能”。
完成此操作后，[Templater](https://github.com/SilentVoid13/Templater) 将创建一个以您定义的名称命名的用户函数，该函数将执行您的系统命令并返回其输出。

就像内部函数一样，用户函数在`tp` JavaScript 对象下可用，更具体地说，在`tp.user` 对象下可用。

![user_templates](https://silentvoid13.github.io/Templater/assets/images/templater_user_templates-36f6900a86474cd90e46f4ec3f836b0b.png)

## 函数参数

您可以将可选参数传递给用户函数。它们必须作为包含属性及其相应值的单个 JavaScript 对象传递：`{arg1: value1, arg2: value2, ...}`。

这些参数将以 [环境变量](https://en.wikipedia.org/wiki/Environment_variable) 的形式提供给您的程序/脚本。

在我们之前的示例中，这将给出以下命令声明：`<% tp.user.echo({a: "value 1", b: "value 2"})`。

如果我们的系统命令正在调用 bash 脚本，我们将能够使用 `$a` 和 `$b` 访问变量 `a` 和 `b`。

## 系统命令中的内部变量/函数

您可以在系统命令中使用内部变量/函数。在执行系统命令之前，内部变量/函数将被它们的结果替换。

您仍然需要使用命令来调用内部变量/函数。

例如，如果您配置了系统命令 `cat <% tp.file.path() %>`，它将在系统命令执行之前被替换为 `cat /path/to/file`。

上一节： [用户函数脚本](用户函数脚本.md)下一节：[概述](../命令/概述.md)
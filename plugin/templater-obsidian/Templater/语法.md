# 语法

[[Templater]] 使用 [Eta](https://eta.js.org/) 模板引擎语法来声明命令。您可能需要一点时间来习惯它，但是一旦您有了想法，语法就不是那么难了。

[[Templater]] 的所有**变量和函数**都是使用[命令](../命令/概述)调用的 JavaScript 对象。

## 命令语法

命令**必须**同时具有开始标记 `<%` 和结束标记 `%>`。

使用 `tp.date.now` 内部函数的完整命令是： `<% tp.date.now() %>`

## 变量/函数语法

###  对象继承

[[Templater]] 的所有**变量和函数**，无论是内部的还是用户定义的，都可以在 `tp` 对象下使用。可以说我们所有的**变量/函数**都是 `tp` 对象的子对象。要访问对象的 “子对象”，我们必须使用`.`。

这意味着模板程序的**变量/函数**调用将始终以 `tp.<something>` 开头。

### 对象调用

要调用一个变量，你只需要输入它的名字，例如 `tp.file.title`。

### 方法调用

要调用函数，我们需要使用特定于函数调用的语法：在函数名称后附加左括号和右括号。

例如，我们将使用 `tp.date.now()` 来调用 `tp.date.now` 内部函数。

一个函数可以有参数和可选参数。它们位于左括号和右括号之间，如下所示：

```js
tp.date.now(arg1_value, arg2_value, arg3_value, ...)
```
所有参数必须以正确的顺序传递。  

函数的参数可以有不同的**类型**。以下是可能的函数类型列表：

- `string` 类型意味着值必须放在单引号或双引号内（`“value”` 或 `'value'`）
- `number` 类型意味着该值必须是整数 (`15`, `-5`, ...)
- `boolean` 类型意味着该值必须为 `true` 或 `false`（完全小写）

调用函数时必须遵守参数的类型，否则将不起作用。

## 函数文档语法

[[Templater]] 内部函数的文档使用以下语法：

```js
tp.<my_function>(arg1_name: type, arg2_name?: type, arg3_name: type = <default_value>, arg4_name: type1|type2, ...)
```
说明：

- `arg_name` 代表参数的符号名称，以了解它是什么。
- `type` 表示参数的预期类型。调用内部函数时必须尊重这种类型，否则会抛出错误。

如果参数是可选的，它将附加一个问号`？`，例如 `arg2_name?:type`。

如果一个参数有一个默认值，它将使用等号 `=` 指定，如 `arg3_name: type = <default_value>`。

如果一个参数可以有不同的类型，它将使用管道 `|` 指定，如：`arg4_name: type1|type2`。


> 请注意，此语法仅用于文档目的，以便能够理解函数期望的参数。调用函数时，不得指定参数的名称、类型或默认值。只需要参数的值。

示例：

我们以 `tp.date.now` 内部函数文档为例：

```javascript
tp.date.now(format: string = "YYYY-MM-DD", offset?: number|string, reference?: string, reference_format?: string)
```
这个内部函数有 4 个可选参数：

- format(格式化)， 类型为 `string`，默认值为 `“YYYY-MM-DD”`。
- offset(偏移量)，类型为 `number` 或 `string` 。
- reference(引用)， `string` 类型。
- reference_format，`string` 类型。

这意味着此内部函数的**有效调用**是：

-   `<% tp.date.now() %>`
-   `<% tp.date.now("YYYY-MM-DD", 7) %>`
-   `<% tp.date.now("YYYY-MM-DD", 7, "2021-04-09", "YYYY-MM-DD") %>`
-   `<% tp.date.now("dddd, MMMM Do YYYY", 0, tp.file.title, "YYYY-MM-DD") %>` 假设文件名的格式为：“YYYY-MM-DD”

另一方面，**无效调用**是：

-   `tp.date.now(format: string = "YYYY-MM-DD")`
-   `tp.date.now(format: string = "YYYY-MM-DD", offset?: 0)`

上一节 [术语](术语.md) 下一节：[设置](设置.md)






